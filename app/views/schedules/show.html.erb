<%= link_to "管理画面に戻る", schedules_path %>

<h2><%= @schedule.name %></h2>

<table>
  <thead>
    <th scope="col">時刻</th>
    <th scope="col">日曜日</th>
    <th scope="col">月曜日</th>
    <th scope="col">火曜日</th>
    <th scope="col">水曜日</th>
    <th scope="col">木曜日</th>
    <th scope="col">金曜日</th>
    <th scope="col">土曜日</th>
  </thead>
  <tbody>
    <% 48.times do |t| %>
      <tr>
      <% time_separate_start = @time + 60 * 30 * t %>
      <% time_separate_end = @time + 60 * 30 * (t + 1) %>
        <th scope="row"><%= "#{time_separate_start.strftime("%H:%M")} ~ #{time_separate_end.strftime("%H:%M")}" %></th>
        <% 7.times do |w| %>
          <td>
            <% schedule_plan = @schedule.plans.find_by(starting_day_of_week: w.to_i, starting_time_before_type_conversion: time_separate_start) %>
            <% if schedule_plan %>
              <%= link_to schedule_plan.name, "/schedules/#{@schedule.id}/plans/#{schedule_plan.id}/edit" %>
            <% else %>
              <%= link_to "+", new_schedule_plan_path(@schedule, starting_day_of_week: w.to_i, starting_time_before_type_conversion: time_separate_start) %>
            <% end %>
          </td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
